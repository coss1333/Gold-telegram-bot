# Gold Telegram Bot

Бот по запросу показывает изменение цены Золота и объёмы торгов за последний час:
- Spot XAU/USD (цена и 24ч изменение)
- GLD (ETF, как прокси фондового рынка: цена, 24ч изменение, объём за последний час)
- Фьючерсы GC=F и MGC=F (цена главного контракта, 24ч изменение, суммарный объём за последний час)
- Итоговый объём за последний час = GLD + фьючерсы

**Источник данных:** Yahoo Finance через библиотеку `yfinance`.
Обратите внимание, что для спота (XAUUSD) обычно нет достоверного объёма, поэтому он не включается в итог.

---

## Быстрый старт

1) Установите Python 3.10+ и git.
2) Скачайте этот проект и перейдите в папку:
   ```bash
   cd gold_telegram_bot
   ```
3) Создайте виртуальное окружение и установите зависимости:
   ```bash
   python -m venv .venv
   .venv\Scripts\activate    # Windows
   # source .venv/bin/activate  # macOS/Linux

   pip install -r requirements.txt
   ```
4) Настройте токен Telegram-бота:
   - Скопируйте файл `.env.example` в `.env` и вставьте `TELEGRAM_BOT_TOKEN` от @BotFather.
   - При необходимости измените таймзону (по умолчанию `Europe/Riga`).

5) Запустите бота:
   ```bash
   python bot.py
   ```

6) В Telegram откройте своего бота и отправьте команду:
   ```
   /gold
   ```

---

## Что именно показывает бот

- **Spot (XAUUSD=X)**: текущая цена и изменение за последние 24 часа по почасовым данным.
- **GLD (ETF)**: цена, 24ч изменение, а также сумма минутных объёмов за последний час.
- **Фьючерсы (GC=F, MGC=F)**: цена главного контракта (GC=F), 24ч изменение, сумма минутных объёмов обоих тикеров за последний час.
- **Итого за последний час**: сумма объёмов GLD + фьючерсы.
  Если рынки закрыты, объём за последний час может быть равен нулю — это нормально.

---

## Советы и доработки

- Добавьте ещё прокси фондового рынка (например, `IAU`, `GLDM`) — тогда их объёмы можно суммировать в итого.
- Для более точной картины фьючерсных объёмов можно добавить `QO=F` (E-mini Gold), если он доступен в Yahoo Finance.
- При необходимости добавьте кеширование запросов к Yahoo (например, с помощью `requests-cache`) и обработку пустых ответов в нерабочие часы.
- Если хотите получать авто‑сводку по расписанию, добавьте `apscheduler` и планировщик, который будет отправлять сводку по времени в выбранный чат.

---

## Отладка

- Если `yfinance` возвращает пустые DataFrame'ы, попробуйте увеличить `period` или изменить `interval`.
- Учтите, что Yahoo иногда ограничивает частоту запросов — добавляйте задержки при циклических вызовах.
- Для хостинга на сервере заморозьте зависимости и используйте `systemd` или `pm2` для автозапуска процесса.
